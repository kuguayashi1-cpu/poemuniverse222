<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯—æ„æ˜Ÿç©º - è¯—æ­Œå±•è§ˆé¦†</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Han+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Han Serif SC', 'Source Han Serif CN', 'Noto Serif SC', 'Songti SC', 'SimSun', serif;
            background: radial-gradient(ellipse at center, #0a0e27 0%, #1a1a2e 30%, #16213e 60%, #0f1419 100%);
            color: white;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* è¿”å›æŒ‰é’® */
        .back-btn {
            position: fixed;
            top: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(180, 200, 255, 0.3);
            border-radius: 50%;
            color: rgba(200, 220, 255, 0.8);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }

        .back-btn:hover {
            border-color: rgba(200, 220, 255, 0.8);
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(200, 220, 255, 0.4);
        }

        .back-btn::before {
            content: 'â†';
            font-size: 20px;
        }

        /* æ ‡é¢˜ */
        .exhibition-title {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #c0d0ff, #a0b8ff, #80a0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            z-index: 100;
            text-align: center;
            animation: titleFloat 4s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateX(-50%) translateY(0px); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* Three.js å®¹å™¨ */
        #three-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* è¯—æ­Œæ¼‚æµ®é«˜äº®æ¡† */
        .poetry-highlight {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(20, 30, 60, 0.8) 100%);
            border: 3px solid rgba(200, 220, 255, 0.6);
            border-radius: 25px;
            padding: 40px 50px;
            backdrop-filter: blur(25px);
            z-index: 200;
            max-width: 70%;
            text-align: center;
            min-width: 400px;
            box-shadow: 
                0 0 30px rgba(200, 220, 255, 0.3),
                0 0 60px rgba(180, 200, 255, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            animation: highlightFloat 6s ease-in-out infinite;
        }

        @keyframes highlightFloat {
            0%, 100% { 
                transform: translate(-50%, -50%) translateY(0px) scale(1);
                box-shadow: 
                    0 0 30px rgba(200, 220, 255, 0.3),
                    0 0 60px rgba(180, 200, 255, 0.2),
                    inset 0 0 20px rgba(255, 255, 255, 0.1);
            }
            50% { 
                transform: translate(-50%, -50%) translateY(-10px) scale(1.02);
                box-shadow: 
                    0 0 40px rgba(200, 220, 255, 0.4),
                    0 0 80px rgba(180, 200, 255, 0.3),
                    inset 0 0 25px rgba(255, 255, 255, 0.15);
            }
        }

        .poetry-text {
            font-size: 2.2rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 20px;
            font-family: 'Source Han Serif SC', 'Source Han Serif CN', 'Noto Serif SC', 'Songti SC', 'SimSun', serif;
            font-weight: 600;
            text-shadow: 0 0 20px rgba(200, 220, 255, 0.5);
            animation: textGlow 3s ease-in-out infinite alternate;
        }

        @keyframes textGlow {
            0% { 
                text-shadow: 0 0 20px rgba(200, 220, 255, 0.5);
                color: rgba(255, 255, 255, 0.95);
            }
            100% { 
                text-shadow: 0 0 30px rgba(200, 220, 255, 0.8);
                color: rgba(255, 255, 255, 1);
            }
        }

        .poetry-id {
            font-size: 1rem;
            color: rgba(180, 200, 255, 0.7);
            font-style: italic;
            margin-top: 10px;
        }

        /* éšè—èœå•å›¾æ ‡ */
        .menu-toggle {
            position: fixed;
            top: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(180, 200, 255, 0.3);
            border-radius: 50%;
            color: rgba(200, 220, 255, 0.8);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.7;
        }

        .menu-toggle:hover {
            opacity: 1;
            border-color: rgba(200, 220, 255, 0.8);
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(200, 220, 255, 0.4);
        }

        .menu-toggle::before {
            content: 'â˜°';
        }

        /* æ§åˆ¶é¢æ¿ - éšè—çŠ¶æ€ */
        .control-panel {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(180, 200, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            z-index: 100;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .control-panel.show {
            transform: translateX(0);
        }

        .control-btn {
            display: block;
            width: 100%;
            padding: 10px 20px;
            margin-bottom: 10px;
            background: rgba(180, 200, 255, 0.1);
            border: 1px solid rgba(180, 200, 255, 0.3);
            border-radius: 8px;
            color: rgba(200, 220, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .control-btn:hover {
            background: rgba(180, 200, 255, 0.2);
            border-color: rgba(200, 220, 255, 0.5);
        }

        .control-btn:last-child {
            margin-bottom: 0;
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(180, 200, 255, 0.3);
            border-radius: 15px;
            padding: 15px;
            backdrop-filter: blur(10px);
            z-index: 100;
            font-size: 0.9rem;
            color: rgba(200, 220, 255, 0.7);
        }

        /* æ˜Ÿç©ºèƒŒæ™¯å±‚ */
        .starfield-background {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
            overflow: hidden;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, rgba(255,255,255,0.3), transparent),
                radial-gradient(1px 1px at 40px 70px, rgba(200,220,255,0.2), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(180,200,255,0.4), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(220,240,255,0.3), transparent),
                radial-gradient(1px 1px at 160px 20px, rgba(160,180,255,0.4), transparent),
                radial-gradient(1px 1px at 190px 60px, rgba(240,250,255,0.3), transparent),
                radial-gradient(1px 1px at 220px 10px, rgba(170,190,255,0.4), transparent),
                radial-gradient(1px 1px at 250px 50px, rgba(190,210,255,0.3), transparent);
            background-repeat: repeat;
            background-size: 300px 300px;
            animation: starfieldTwinkle 8s ease-in-out infinite alternate;
        }

        @keyframes starfieldTwinkle {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }

        /* åŠ¨æ€æ˜Ÿäº‘æ•ˆæœ */
        .nebula-overlay {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            background: 
                radial-gradient(ellipse 600px 400px at 30% 40%, rgba(40, 80, 140, 0.1) 0%, transparent 60%),
                radial-gradient(ellipse 400px 600px at 70% 60%, rgba(30, 60, 120, 0.15) 0%, transparent 60%),
                radial-gradient(ellipse 500px 300px at 20% 80%, rgba(50, 100, 150, 0.08) 0%, transparent 70%);
            animation: nebulaDrift 20s ease-in-out infinite;
        }

        @keyframes nebulaDrift {
            0%, 100% { 
                transform: translateX(0px) translateY(0px) scale(1);
                opacity: 0.6;
            }
            33% { 
                transform: translateX(20px) translateY(-15px) scale(1.05);
                opacity: 0.8;
            }
            66% { 
                transform: translateX(-15px) translateY(10px) scale(0.95);
                opacity: 0.7;
            }
        }

        /* èƒŒæ™¯æ¼‚æµ®æ–‡å­— */
        .floating-text-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            overflow: hidden;
        }

        .floating-text-item {
            position: absolute;
            font-family: 'Source Han Serif SC', 'Source Han Serif CN', 'Noto Serif SC', 'Songti SC', 'SimSun', serif;
            font-size: 1.2rem;
            color: rgba(200, 220, 255, 0.2);
            font-weight: 500;
            animation: textFloatBg 12s ease-in-out infinite;
            text-shadow: 0 0 10px rgba(200, 220, 255, 0.1);
        }

        @keyframes textFloatBg {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(0.8); 
                opacity: 0.1;
            }
            25% { 
                transform: translateY(-40px) translateX(20px) rotate(2deg) scale(1.1); 
                opacity: 0.3;
            }
            50% { 
                transform: translateY(-20px) translateX(-15px) rotate(-1deg) scale(0.9); 
                opacity: 0.2;
            }
            75% { 
                transform: translateY(-35px) translateX(25px) rotate(1deg) scale(1.05); 
                opacity: 0.25;
            }
        }

        /* åŠ è½½æç¤º */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            color: rgba(200, 220, 255, 0.8);
            z-index: 500;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .exhibition-title {
                font-size: 1.8rem;
                top: 20px;
            }
            
            .poetry-panel {
                bottom: 20px;
                padding: 20px 25px;
                max-width: 90%;
            }
            
            .poetry-text {
                font-size: 1.4rem;
            }
            
            .control-panel {
                top: 20px;
                right: 20px;
                padding: 15px;
            }
            
            .stats {
                bottom: 20px;
                right: 20px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- è¿”å›æŒ‰é’® -->
    <a href="index.html" class="back-btn" title="è¿”å›ä¸»é¡µ"></a>
    
    <!-- æ ‡é¢˜ -->
    <h1 class="exhibition-title">è¯—æ„æ˜Ÿç©º Â· è¯—æ­Œå±•è§ˆé¦†</h1>
    
    <!-- Three.js å®¹å™¨ -->
    <div id="three-container"></div>
    
    <!-- æ˜Ÿç©ºèƒŒæ™¯å±‚ -->
    <div class="starfield-background"></div>
    
    <!-- åŠ¨æ€æ˜Ÿäº‘æ•ˆæœ -->
    <div class="nebula-overlay"></div>
    
    <!-- èƒŒæ™¯æ¼‚æµ®æ–‡å­— -->
    <div class="floating-text-bg" id="floatingTextBg"></div>
    
    <!-- è¯—æ­Œæ¼‚æµ®é«˜äº®æ¡† -->
    <div class="poetry-highlight" id="poetryHighlight">
        <div class="poetry-text" id="poetryText">è¯—æ„æ˜Ÿç©ºæ­£åœ¨åŠ è½½...</div>
        <div class="poetry-id" id="poetryId"></div>
    </div>
    
    <!-- éšè—èœå•å›¾æ ‡ -->
    <div class="menu-toggle" onclick="toggleMenu()" id="menuToggle"></div>
    
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel" id="controlPanel">
        <button class="control-btn" onclick="toggleSound()" id="soundBtn">ğŸ”Š éŸ³æ•ˆ</button>
        <button class="control-btn" onclick="resetStars()">ğŸ”„ é‡ç½®</button>
        <button class="control-btn" onclick="showAllPoetry()">ğŸ“š è¯—æ­Œæ€»è§ˆ</button>
        <button class="control-btn" onclick="toggleAutoChange()" id="autoBtn">â¸ï¸ è‡ªåŠ¨åˆ‡æ¢</button>
    </div>
    
    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="stats">
        <div>è¯—æ­Œæ€»æ•°: <span id="totalCount">0</span></div>
        <div>å·²æ¢ç´¢: <span id="exploredCount">0</span></div>
        <div>å½“å‰æ¨¡å¼: <span id="currentMode">æ¢ç´¢æ¨¡å¼</span></div>
    </div>
    
    <!-- åŠ è½½æç¤º -->
    <div class="loading" id="loading">æ­£åœ¨åŠ è½½è¯—æ„æ˜Ÿç©º...</div>

    <script>
        // å…¨å±€å˜é‡
        let scene, camera, renderer, stars = [];
        let poetryData = [];
        let exploredPoems = new Set();
        let soundEnabled = true;
        let currentMode = 'explore';
        let audioContext, backgroundSound;
        let autoChangeInterval;
        let autoChangeEnabled = true;
        let menuVisible = false;

        // è¯—æ­Œæ•°æ® - æœ¬åœ°ç”Ÿæˆçš„è¯—å¥
        const poetryDatabase = [
            {"id": 1, "text": "é—¨å¤–çš„é£åœ¨ç­‰å®¶"},
            {"id": 2, "text": "æ¯äº²çš„å½±å­è—åœ¨æœˆäº®å"},
            {"id": 3, "text": "æ˜Ÿæ˜Ÿé‡Œæœ‰å¨æˆ¿çš„æ°”å‘³"},
            {"id": 4, "text": "è®°å¿†åœ¨å¤ªç©ºä¸­æ¼‚æµ®"},
            {"id": 5, "text": "æ— æ³•æ‰“å¼€çš„é—¨åæ˜¯æ•…ä¹¡"},
            {"id": 6, "text": "æ—¶é—´åœ¨æ˜Ÿå°˜ä¸­é™æ­¢"},
            {"id": 7, "text": "å®¶çš„ä¿¡å·ç©¿è¶Šå…‰å¹´"},
            {"id": 8, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚å½—æ˜Ÿ"},
            {"id": 9, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„é’¥åŒ™"},
            {"id": 10, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œå…³é—­"},
            {"id": 11, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨å®‡å®™ä¸­æ—‹è½¬"},
            {"id": 12, "text": "å®¶çš„å‘³é“åœ¨çœŸç©ºä¸­æ¶ˆæ•£"},
            {"id": 13, "text": "æ— æ³•æŠµè¾¾çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 14, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„é—¨"},
            {"id": 15, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„å®¶"},
            {"id": 16, "text": "å¤±é‡çš„æ€å¿µé£˜å‘è¿œæ–¹"},
            {"id": 17, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„æŠ•å½±"},
            {"id": 18, "text": "é—¨åçš„å…‰å¹´è·ç¦»"},
            {"id": 19, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿäº‘ä¸­"},
            {"id": 20, "text": "æ— æ³•æ‰“å¼€çš„å®¶é—¨"},
            {"id": 21, "text": "è®°å¿†åœ¨é»‘æ´è¾¹ç¼˜å¾˜å¾Š"},
            {"id": 22, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿå°˜æ©åŸ‹"},
            {"id": 23, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æµæ˜Ÿ"},
            {"id": 24, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å¯†ç "},
            {"id": 25, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œé”ç€"},
            {"id": 26, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­æ¼‚æµ"},
            {"id": 27, "text": "å®¶çš„å‘³é“åœ¨å®‡å®™ä¸­ç¨€é‡Š"},
            {"id": 28, "text": "æ— æ³•æ¥æ”¶çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 29, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„é’¥åŒ™"},
            {"id": 30, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„é—¨"},
            {"id": 31, "text": "å¤±é‡çš„å®¶é£˜å‘è™šæ— "},
            {"id": 32, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„ç¢ç‰‡"},
            {"id": 33, "text": "é—¨åçš„å…‰å¹´ç­‰å¾…"},
            {"id": 34, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿå°˜ä¸­"},
            {"id": 35, "text": "æ— æ³•æ‰“å¼€çš„è®°å¿†é—¨"},
            {"id": 36, "text": "è®°å¿†åœ¨æ˜Ÿäº‘ä¸­è¿·å¤±"},
            {"id": 37, "text": "å®¶çš„ä¿¡å·è¢«é»‘æ´åå™¬"},
            {"id": 38, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿå°˜"},
            {"id": 39, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„é”"},
            {"id": 40, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œå…³é—­"},
            {"id": 41, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨æ˜Ÿæµ·ä¸­æ²‰æµ®"},
            {"id": 42, "text": "å®¶çš„å‘³é“åœ¨çœŸç©ºä¸­è’¸å‘"},
            {"id": 43, "text": "æ— æ³•è§£ç çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 44, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„å®¶"},
            {"id": 45, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„è®°å¿†"},
            {"id": 46, "text": "å¤±é‡çš„é—¨é£˜å‘æ·±æ¸Š"},
            {"id": 47, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„å€’å½±"},
            {"id": 48, "text": "é—¨åçš„å…‰å¹´æ²‰é»˜"},
            {"id": 49, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿäº‘ä¸­æ¶ˆæ•£"},
            {"id": 50, "text": "æ— æ³•æ‰“å¼€çš„æ—¶é—´é—¨"},
            {"id": 51, "text": "è®°å¿†åœ¨æ˜Ÿå°˜ä¸­ç‡ƒçƒ§"},
            {"id": 52, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿäº‘é®è”½"},
            {"id": 53, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿç«"},
            {"id": 54, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å°å°"},
            {"id": 55, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œæ²‰é»˜"},
            {"id": 56, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­ç‡ƒçƒ§"},
            {"id": 57, "text": "å®¶çš„å‘³é“åœ¨å®‡å®™ä¸­æ¶ˆå¤±"},
            {"id": 58, "text": "æ— æ³•ç ´è¯‘çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 59, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„æ—¶é—´"},
            {"id": 60, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„é—¨é”"},
            {"id": 61, "text": "å¤±é‡çš„è®°å¿†é£˜å‘æ°¸æ’"},
            {"id": 62, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„ç°çƒ¬"},
            {"id": 63, "text": "é—¨åçš„å…‰å¹´å¯‚é™"},
            {"id": 64, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿå°˜ä¸­æ¹®ç­"},
            {"id": 65, "text": "æ— æ³•æ‰“å¼€çš„ç©ºé—´é—¨"},
            {"id": 66, "text": "è®°å¿†åœ¨æ˜Ÿæµ·ä¸­æ²‰æ²¡"},
            {"id": 67, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿå°˜æ©åŸ‹"},
            {"id": 68, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿå°˜"},
            {"id": 69, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å¢“ç¢‘"},
            {"id": 70, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œå…³é—­"},
            {"id": 71, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­æ²‰æ²¡"},
            {"id": 72, "text": "å®¶çš„å‘³é“åœ¨çœŸç©ºä¸­æ¶ˆå¤±"},
            {"id": 73, "text": "æ— æ³•æ¥æ”¶çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 74, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„è®°å¿†"},
            {"id": 75, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„æ•…ä¹¡"},
            {"id": 76, "text": "å¤±é‡çš„å®¶é£˜å‘è™šæ— "},
            {"id": 77, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„åŸå¢“"},
            {"id": 78, "text": "é—¨åçš„å…‰å¹´ç­‰å¾…"},
            {"id": 79, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿäº‘ä¸­æ¶ˆæ•£"},
            {"id": 80, "text": "æ— æ³•æ‰“å¼€çš„è®°å¿†é—¨"},
            {"id": 81, "text": "è®°å¿†åœ¨æ˜Ÿå°˜ä¸­ç‡ƒçƒ§"},
            {"id": 82, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿäº‘é®è”½"},
            {"id": 83, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿç«"},
            {"id": 84, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å°å°"},
            {"id": 85, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œæ²‰é»˜"},
            {"id": 86, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­ç‡ƒçƒ§"},
            {"id": 87, "text": "å®¶çš„å‘³é“åœ¨å®‡å®™ä¸­æ¶ˆå¤±"},
            {"id": 88, "text": "æ— æ³•ç ´è¯‘çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 89, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„æ—¶é—´"},
            {"id": 90, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„é—¨é”"},
            {"id": 91, "text": "å¤±é‡çš„è®°å¿†é£˜å‘æ°¸æ’"},
            {"id": 92, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„ç°çƒ¬"},
            {"id": 93, "text": "é—¨åçš„å…‰å¹´å¯‚é™"},
            {"id": 94, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿå°˜ä¸­æ¹®ç­"},
            {"id": 95, "text": "æ— æ³•æ‰“å¼€çš„ç©ºé—´é—¨"},
            {"id": 96, "text": "è®°å¿†åœ¨æ˜Ÿæµ·ä¸­æ²‰æ²¡"},
            {"id": 97, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿå°˜æ©åŸ‹"},
            {"id": 98, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿå°˜"},
            {"id": 99, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å¢“ç¢‘"},
            {"id": 100, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œå…³é—­"},
            {"id": 101, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­æ²‰æ²¡"},
            {"id": 102, "text": "å®¶çš„å‘³é“åœ¨çœŸç©ºä¸­æ¶ˆå¤±"},
            {"id": 103, "text": "æ— æ³•æ¥æ”¶çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 104, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„è®°å¿†"},
            {"id": 105, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„æ•…ä¹¡"},
            {"id": 106, "text": "å¤±é‡çš„å®¶é£˜å‘è™šæ— "},
            {"id": 107, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„åŸå¢“"},
            {"id": 108, "text": "é—¨åçš„å…‰å¹´ç­‰å¾…"},
            {"id": 109, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿäº‘ä¸­æ¶ˆæ•£"},
            {"id": 110, "text": "æ— æ³•æ‰“å¼€çš„è®°å¿†é—¨"},
            {"id": 111, "text": "è®°å¿†åœ¨æ˜Ÿå°˜ä¸­ç‡ƒçƒ§"},
            {"id": 112, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿäº‘é®è”½"},
            {"id": 113, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿç«"},
            {"id": 114, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å°å°"},
            {"id": 115, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œæ²‰é»˜"},
            {"id": 116, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­ç‡ƒçƒ§"},
            {"id": 117, "text": "å®¶çš„å‘³é“åœ¨å®‡å®™ä¸­æ¶ˆå¤±"},
            {"id": 118, "text": "æ— æ³•ç ´è¯‘çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 119, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„æ—¶é—´"},
            {"id": 120, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„é—¨é”"},
            {"id": 121, "text": "å¤±é‡çš„è®°å¿†é£˜å‘æ°¸æ’"},
            {"id": 122, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„ç°çƒ¬"},
            {"id": 123, "text": "é—¨åçš„å…‰å¹´å¯‚é™"},
            {"id": 124, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿå°˜ä¸­æ¹®ç­"},
            {"id": 125, "text": "æ— æ³•æ‰“å¼€çš„ç©ºé—´é—¨"},
            {"id": 126, "text": "è®°å¿†åœ¨æ˜Ÿæµ·ä¸­æ²‰æ²¡"},
            {"id": 127, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿå°˜æ©åŸ‹"},
            {"id": 128, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿå°˜"},
            {"id": 129, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å¢“ç¢‘"},
            {"id": 130, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œå…³é—­"},
            {"id": 131, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­æ²‰æ²¡"},
            {"id": 132, "text": "å®¶çš„å‘³é“åœ¨çœŸç©ºä¸­æ¶ˆå¤±"},
            {"id": 133, "text": "æ— æ³•æ¥æ”¶çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 134, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„è®°å¿†"},
            {"id": 135, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„æ•…ä¹¡"},
            {"id": 136, "text": "å¤±é‡çš„å®¶é£˜å‘è™šæ— "},
            {"id": 137, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„åŸå¢“"},
            {"id": 138, "text": "é—¨åçš„å…‰å¹´ç­‰å¾…"},
            {"id": 139, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿäº‘ä¸­æ¶ˆæ•£"},
            {"id": 140, "text": "æ— æ³•æ‰“å¼€çš„è®°å¿†é—¨"},
            {"id": 141, "text": "è®°å¿†åœ¨æ˜Ÿå°˜ä¸­ç‡ƒçƒ§"},
            {"id": 142, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿäº‘é®è”½"},
            {"id": 143, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿç«"},
            {"id": 144, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å°å°"},
            {"id": 145, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œæ²‰é»˜"},
            {"id": 146, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­ç‡ƒçƒ§"},
            {"id": 147, "text": "å®¶çš„å‘³é“åœ¨å®‡å®™ä¸­æ¶ˆå¤±"},
            {"id": 148, "text": "æ— æ³•ç ´è¯‘çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 149, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„æ—¶é—´"},
            {"id": 150, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„é—¨é”"},
            {"id": 151, "text": "å¤±é‡çš„è®°å¿†é£˜å‘æ°¸æ’"},
            {"id": 152, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„ç°çƒ¬"},
            {"id": 153, "text": "é—¨åçš„å…‰å¹´å¯‚é™"},
            {"id": 154, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿå°˜ä¸­æ¹®ç­"},
            {"id": 155, "text": "æ— æ³•æ‰“å¼€çš„ç©ºé—´é—¨"},
            {"id": 156, "text": "è®°å¿†åœ¨æ˜Ÿæµ·ä¸­æ²‰æ²¡"},
            {"id": 157, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿå°˜æ©åŸ‹"},
            {"id": 158, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿå°˜"},
            {"id": 159, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å¢“ç¢‘"},
            {"id": 160, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œå…³é—­"},
            {"id": 161, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­æ²‰æ²¡"},
            {"id": 162, "text": "å®¶çš„å‘³é“åœ¨çœŸç©ºä¸­æ¶ˆå¤±"},
            {"id": 163, "text": "æ— æ³•æ¥æ”¶çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 164, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„è®°å¿†"},
            {"id": 165, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„æ•…ä¹¡"},
            {"id": 166, "text": "å¤±é‡çš„å®¶é£˜å‘è™šæ— "},
            {"id": 167, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„åŸå¢“"},
            {"id": 168, "text": "é—¨åçš„å…‰å¹´ç­‰å¾…"},
            {"id": 169, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿäº‘ä¸­æ¶ˆæ•£"},
            {"id": 170, "text": "æ— æ³•æ‰“å¼€çš„è®°å¿†é—¨"},
            {"id": 171, "text": "è®°å¿†åœ¨æ˜Ÿå°˜ä¸­ç‡ƒçƒ§"},
            {"id": 172, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿäº‘é®è”½"},
            {"id": 173, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿç«"},
            {"id": 174, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å°å°"},
            {"id": 175, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œæ²‰é»˜"},
            {"id": 176, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­ç‡ƒçƒ§"},
            {"id": 177, "text": "å®¶çš„å‘³é“åœ¨å®‡å®™ä¸­æ¶ˆå¤±"},
            {"id": 178, "text": "æ— æ³•ç ´è¯‘çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 179, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„æ—¶é—´"},
            {"id": 180, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„é—¨é”"},
            {"id": 181, "text": "å¤±é‡çš„è®°å¿†é£˜å‘æ°¸æ’"},
            {"id": 182, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„ç°çƒ¬"},
            {"id": 183, "text": "é—¨åçš„å…‰å¹´å¯‚é™"},
            {"id": 184, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿå°˜ä¸­æ¹®ç­"},
            {"id": 185, "text": "æ— æ³•æ‰“å¼€çš„ç©ºé—´é—¨"},
            {"id": 186, "text": "è®°å¿†åœ¨æ˜Ÿæµ·ä¸­æ²‰æ²¡"},
            {"id": 187, "text": "å®¶çš„ä¿¡å·è¢«æ˜Ÿå°˜æ©åŸ‹"},
            {"id": 188, "text": "æ¼‚æµ®çš„æ€å¿µå¦‚æ˜Ÿå°˜"},
            {"id": 189, "text": "æœˆäº®æ˜¯æ•…ä¹¡çš„å¢“ç¢‘"},
            {"id": 190, "text": "æ˜Ÿç©ºä¸‹çš„é—¨æ°¸è¿œå…³é—­"},
            {"id": 191, "text": "è®°å¿†çš„ç¢ç‰‡åœ¨é“¶æ²³ä¸­æ²‰æ²¡"},
            {"id": 192, "text": "å®¶çš„å‘³é“åœ¨çœŸç©ºä¸­æ¶ˆå¤±"},
            {"id": 193, "text": "æ— æ³•æ¥æ”¶çš„æ•…ä¹¡ä¿¡å·"},
            {"id": 194, "text": "æ¼‚æµ®åœ¨æ˜Ÿæµ·ä¸­çš„è®°å¿†"},
            {"id": 195, "text": "æ—¶é—´èƒ¶å›Šé‡Œçš„æ•…ä¹¡"},
            {"id": 196, "text": "å¤±é‡çš„å®¶é£˜å‘è™šæ— "},
            {"id": 197, "text": "æ˜Ÿç©ºæ˜¯è®°å¿†çš„åŸå¢“"},
            {"id": 198, "text": "é—¨åçš„å…‰å¹´ç­‰å¾…"},
            {"id": 199, "text": "æ¼‚æµ®çš„æ•…ä¹¡åœ¨æ˜Ÿäº‘ä¸­æ¶ˆæ•£"},
            {"id": 200, "text": "æ— æ³•æ‰“å¼€çš„è®°å¿†é—¨"}
        ];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initThreeJS();
            initAudio();
            loadDynamicPoetry();
            createFloatingText();
            updateStats();
            hideLoading();
            startAutoChange();
        });

        // åŠ è½½åŠ¨æ€è¯—æ­Œæ•°æ®åº“
        function loadDynamicPoetry() {
            const savedPoems = JSON.parse(localStorage.getItem('exhibition-poems') || '[]');
            
            if (savedPoems.length > 0) {
                // ä½¿ç”¨ç”¨æˆ·ç”Ÿæˆçš„è¯—æ­Œ
                poetryDatabase.length = 0; // æ¸…ç©ºé»˜è®¤æ•°æ®
                poetryDatabase.push(...savedPoems);
            }
            // å¦‚æœæ²¡æœ‰ç”¨æˆ·è¯—æ­Œï¼Œä½¿ç”¨é»˜è®¤çš„200é¦–
        }

        // åˆå§‹åŒ– Three.js
        function initThreeJS() {
            const container = document.getElementById('three-container');
            
            // åˆ›å»ºåœºæ™¯
            scene = new THREE.Scene();
            
            // åˆ›å»ºç›¸æœº
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 50;
            
            // åˆ›å»ºæ¸²æŸ“å™¨
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0);
            container.appendChild(renderer.domElement);
            
            // åˆ›å»ºæ˜Ÿæ˜Ÿ
            createStars();
            
            // æ·»åŠ é¼ æ ‡äº¤äº’
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            
            function onMouseClick(event) {
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(stars);
                
                if (intersects.length > 0) {
                    const star = intersects[0].object;
                    const poetryId = star.userData.poetryId;
                    showPoetry(poetryId);
                    
                    // æ˜Ÿæ˜Ÿæ”¾å¤§æ•ˆæœ
                    star.scale.set(2, 2, 2);
                    setTimeout(() => {
                        star.scale.set(1, 1, 1);
                    }, 500);
                }
            }
            
            window.addEventListener('click', onMouseClick);
            window.addEventListener('resize', onWindowResize);
            
            // å¼€å§‹æ¸²æŸ“å¾ªç¯
            animate();
        }

        // åˆ›å»ºæ˜Ÿæ˜Ÿ
        function createStars() {
            const starGeometry = new THREE.SphereGeometry(0.1, 8, 8);
            
            for (let i = 0; i < poetryDatabase.length; i++) {
                const poetry = poetryDatabase[i];
                
                // åˆ›å»ºæ˜Ÿæ˜Ÿæè´¨
                const starMaterial = new THREE.MeshBasicMaterial({
                    color: new THREE.Color().setHSL(0.6, 0.5, 0.7),
                    transparent: true,
                    opacity: 0.8
                });
                
                // åˆ›å»ºæ˜Ÿæ˜Ÿ
                const star = new THREE.Mesh(starGeometry, starMaterial);
                
                // éšæœºä½ç½®
                star.position.x = (Math.random() - 0.5) * 100;
                star.position.y = (Math.random() - 0.5) * 100;
                star.position.z = (Math.random() - 0.5) * 100;
                
                // æ·»åŠ è¯—æ­Œæ•°æ®
                star.userData.poetryId = poetry.id;
                
                // æ·»åŠ åˆ°åœºæ™¯
                scene.add(star);
                stars.push(star);
            }
        }

        // æ˜¾ç¤ºè¯—æ­Œ
        function showPoetry(poetryId) {
            const poetry = poetryDatabase.find(p => p.id === poetryId);
            if (!poetry) return;
            
            const text = document.getElementById('poetryText');
            const id = document.getElementById('poetryId');
            
            // æ·»åŠ æ·¡å‡ºæ•ˆæœ
            text.style.opacity = '0';
            id.style.opacity = '0';
            
            setTimeout(() => {
                text.textContent = poetry.text;
                id.textContent = `è¯—æ­Œ #${poetry.id}`;
                
                // æ·»åŠ æ·¡å…¥æ•ˆæœ
                text.style.opacity = '1';
                id.style.opacity = '1';
            }, 300);
            
            // è®°å½•å·²æ¢ç´¢çš„è¯—æ­Œ
            exploredPoems.add(poetryId);
            updateStats();
            
            // æ’­æ”¾éŸ³æ•ˆ
            if (soundEnabled) {
                playClickSound();
            }
        }

        // åˆ‡æ¢èœå•
        function toggleMenu() {
            const panel = document.getElementById('controlPanel');
            const toggle = document.getElementById('menuToggle');
            
            menuVisible = !menuVisible;
            
            if (menuVisible) {
                panel.classList.add('show');
                toggle.style.opacity = '1';
            } else {
                panel.classList.remove('show');
                toggle.style.opacity = '0.7';
            }
        }

        // å¼€å§‹è‡ªåŠ¨åˆ‡æ¢
        function startAutoChange() {
            if (autoChangeInterval) {
                clearInterval(autoChangeInterval);
            }
            
            autoChangeInterval = setInterval(() => {
                if (autoChangeEnabled) {
                    const randomId = Math.floor(Math.random() * poetryDatabase.length) + 1;
                    showPoetry(randomId);
                }
            }, 4000); // æ¯4ç§’åˆ‡æ¢ä¸€æ¬¡
        }

        // åˆ‡æ¢è‡ªåŠ¨åˆ‡æ¢
        function toggleAutoChange() {
            autoChangeEnabled = !autoChangeEnabled;
            const btn = document.getElementById('autoBtn');
            
            if (autoChangeEnabled) {
                btn.textContent = 'â¸ï¸ è‡ªåŠ¨åˆ‡æ¢';
                startAutoChange();
            } else {
                btn.textContent = 'â–¶ï¸ è‡ªåŠ¨åˆ‡æ¢';
                if (autoChangeInterval) {
                    clearInterval(autoChangeInterval);
                }
            }
        }


        // é‡ç½®æ˜Ÿæ˜Ÿ
        function resetStars() {
            stars.forEach(star => {
                star.position.x = (Math.random() - 0.5) * 100;
                star.position.y = (Math.random() - 0.5) * 100;
                star.position.z = (Math.random() - 0.5) * 100;
                star.scale.set(1, 1, 1);
            });
            
            exploredPoems.clear();
            updateStats();
        }

        // æ˜¾ç¤ºæ‰€æœ‰è¯—æ­Œ
        function showAllPoetry() {
            currentMode = currentMode === 'overview' ? 'explore' : 'overview';
            updateStats();
            
            if (currentMode === 'overview') {
                // åˆ›å»ºæ€»è§ˆçª—å£
                const overviewWindow = window.open('', '_blank', 'width=1200,height=800');
                overviewWindow.document.write(`
                    <!DOCTYPE html>
                    <html lang="zh-CN">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>è¯—æ­Œæ€»è§ˆ</title>
                        <style>
                            body {
                                font-family: 'Source Han Serif SC', 'Source Han Serif CN', 'Noto Serif SC', 'Songti SC', 'SimSun', serif;
                                background: linear-gradient(135deg, #0a0e27 0%, #1a1a2e 50%, #16213e 100%);
                                color: white;
                                margin: 0;
                                padding: 20px;
                                overflow-x: hidden;
                            }
                            .overview-container {
                                max-width: 1000px;
                                margin: 0 auto;
                            }
                            .overview-title {
                                text-align: center;
                                font-size: 3rem;
                                font-weight: bold;
                                background: linear-gradient(45deg, #ffd700, #8b5cf6, #ec4899);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                                background-clip: text;
                                margin-bottom: 40px;
                            }
                            .poetry-grid {
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                                gap: 20px;
                            }
                            .poetry-card {
                                background: rgba(0, 0, 0, 0.3);
                                border: 2px solid rgba(255, 255, 255, 0.2);
                                border-radius: 15px;
                                padding: 20px;
                                backdrop-filter: blur(10px);
                            }
                            .poetry-card-text {
                                font-family: 'Source Han Serif SC', 'Source Han Serif CN', 'Noto Serif SC', 'Songti SC', 'SimSun', serif;
                                line-height: 1.8;
                                margin-bottom: 15px;
                                font-size: 1.1rem;
                            }
                            .poetry-card-id {
                                font-size: 0.9rem;
                                color: #999;
                            }
                        </style>
                    </head>
                    <body>
                        <div class="overview-container">
                            <h1 class="overview-title">è¯—æ­Œæ€»è§ˆ</h1>
                            <div class="poetry-grid">
                                ${poetryDatabase.map(poetry => `
                                    <div class="poetry-card">
                                        <div class="poetry-card-text">${poetry.text}</div>
                                        <div class="poetry-card-id">è¯—æ­Œ #${poetry.id}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </body>
                    </html>
                `);
                overviewWindow.document.close();
            }
        }

        // åˆ‡æ¢éŸ³æ•ˆ
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const btn = document.getElementById('soundBtn');
            btn.textContent = soundEnabled ? 'ğŸ”Š éŸ³æ•ˆ' : 'ğŸ”‡ éŸ³æ•ˆ';
            
            if (soundEnabled && audioContext) {
                startHeartbeat();
            }
        }

        // åˆå§‹åŒ–éŸ³é¢‘
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                startHeartbeat();
            } catch (e) {
                console.log('Web Audio API not supported');
            }
        }

        // å¼€å§‹å¿ƒè·³å£°
        function startHeartbeat() {
            if (!audioContext || !soundEnabled) return;
            
            function playHeartbeat() {
                if (!soundEnabled) return;
                
                // åˆ›å»ºå¿ƒè·³å£° - ä¸¤ä¸ªè¿ç»­çš„ä½é¢‘è„‰å†²
                const oscillator1 = audioContext.createOscillator();
                const oscillator2 = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator1.connect(gainNode);
                oscillator2.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // ç¬¬ä¸€ä¸ªå¿ƒè·³
                oscillator1.frequency.setValueAtTime(40, audioContext.currentTime);
                oscillator1.frequency.exponentialRampToValueAtTime(20, audioContext.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                oscillator1.start(audioContext.currentTime);
                oscillator1.stop(audioContext.currentTime + 0.1);
                
                // ç¬¬äºŒä¸ªå¿ƒè·³ï¼ˆç¨åï¼‰
                setTimeout(() => {
                    if (!soundEnabled) return;
                    oscillator2.frequency.setValueAtTime(40, audioContext.currentTime);
                    oscillator2.frequency.exponentialRampToValueAtTime(20, audioContext.currentTime + 0.1);
                    gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    oscillator2.start(audioContext.currentTime);
                    oscillator2.stop(audioContext.currentTime + 0.1);
                }, 150);
                
                // ä¸‹æ¬¡å¿ƒè·³
                setTimeout(playHeartbeat, 1000);
            }
            
            playHeartbeat();
        }

        // æ’­æ”¾ç‚¹å‡»éŸ³æ•ˆ
        function playClickSound() {
            if (!audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        // åˆ›å»ºèƒŒæ™¯æ¼‚æµ®æ–‡å­—
        function createFloatingText() {
            const container = document.getElementById('floatingTextBg');
            
            // é€‰æ‹©ä¸€äº›è¯—æ­Œä½œä¸ºèƒŒæ™¯æ¼‚æµ®æ–‡å­—ï¼ˆæœ€å¤š10é¦–ï¼Œé¿å…è¿‡å¤šï¼‰
            const backgroundPoems = poetryDatabase.filter((_, index) => index % 5 === 0).slice(0, 10);
            
            backgroundPoems.forEach((poetry, index) => {
                const textElement = document.createElement('div');
                textElement.className = 'floating-text-item';
                textElement.textContent = poetry.text;
                
                textElement.style.left = Math.random() * 100 + '%';
                textElement.style.top = Math.random() * 100 + '%';
                textElement.style.animationDelay = Math.random() * 12 + 's';
                textElement.style.animationDuration = (10 + Math.random() * 8) + 's';
                
                container.appendChild(textElement);
            });
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            document.getElementById('totalCount').textContent = poetryDatabase.length;
            document.getElementById('exploredCount').textContent = exploredPoems.size;
            document.getElementById('currentMode').textContent = currentMode === 'explore' ? 'æ¢ç´¢æ¨¡å¼' : 'æ€»è§ˆæ¨¡å¼';
        }

        // éšè—åŠ è½½æç¤º
        function hideLoading() {
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
            }, 1000);
        }

        // çª—å£å¤§å°æ”¹å˜
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // åŠ¨ç”»å¾ªç¯
        function animate() {
            requestAnimationFrame(animate);
            
            // æ—‹è½¬æ˜Ÿæ˜Ÿ
            stars.forEach((star, index) => {
                star.rotation.x += 0.01;
                star.rotation.y += 0.01;
                
                // è½»å¾®æµ®åŠ¨
                star.position.y += Math.sin(Date.now() * 0.001 + index) * 0.01;
            });
            
            renderer.render(scene, camera);
        }
    </script>
</body>
</html>
